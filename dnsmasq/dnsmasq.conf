# Configuration file for dnsmasq.
#
# Format is one option per line, legal options are the same
# as the long options legal on the command line. See
# "/usr/sbin/dnsmasq --help" or "man 8 dnsmasq" for details.

# If you want dnsmasq to change uid and gid to something other
# than the default, edit the following lines.
user=dnsmasq
group=dnsmasq

# Bind to external inteface
interface=enp3s0
bind-interfaces

# --- Basic Operational Settings ---
# Never forward plain names (without a dot or domain part)
domain-needed
# Never forward addresses in the non-routed address spaces
bogus-priv
# Do not read /etc/resolv.conf (we define upstream manually below)
no-resolv
# Do not poll /etc/resolv.conf for changes
no-poll
# DNS Caching
cache-size=5000

# Enable DNSSEC validation and caching
conf-file=/usr/share/dnsmasq/trust-anchors.conf
dnssec

# Include all files in /etc/dnsmasq.d except RPM backup files
conf-dir=/etc/dnsmasq.d,.rpmnew,.rpmsave,.rpmorig

# --- Upstream DNS Servers (IPv4 & IPv6) ---
# Cloudflare DNS
server=2606:4700:4700::1111
server=1.1.1.1
# Google DNS (fallback)
server=2001:4860:4860::8888
server=8.8.8.8

# Bind holocron dns to local
interface-name=ycserver.ycholocron.com,enp3s0
cname=ycholocron.com,ha.ycholocron.com,jellyfin.ycholocron.com,www.ycholocron.com,ssh.ycholocron.com,cockpit.ycholocron.com,transmission.ycholocron.com,ycmodem.ycholocron.com,ycserver.ycholocron.com
# AP for local
address=/ycap.ycholocron.com/192.168.0.2
